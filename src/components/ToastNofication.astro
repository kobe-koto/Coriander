---
import { Icon } from "astro-icon";
---

<div class="ToastCon">

    <div class="Origins">

        <span class="Symbols">
            <span data-icon-id="check">
                <Icon name="heroicons:check-circle" />
            </span>
            <span data-icon-id="error">
                <Icon name="heroicons:exclamation-circle" />
            </span>
            <span data-icon-id="warn">
                <Icon name="heroicons:exclamation-triangle" />
            </span>
        </span>

        <div class="Toast">
            <span class="symbol"></span>
            <span class="msg"></span>
        </div>

    </div>

</div>

<script lang="javascript">
    window.Toast = {};
    Toast.new = function (IconID, msg) {
        let ToastID = `Toast-${Math.floor(1145141919810 * Math.random())}`,
            ClonedToastOrigin = document.querySelector("div.ToastCon > div.Origins > div.Toast").cloneNode(true),
            TargetIcon = document.querySelector(`div.ToastCon > div.Origins > span.Symbols > span[data-icon-id="${IconID}"] > svg`).cloneNode(true);
        ClonedToastOrigin.querySelector("span.symbol").appendChild(TargetIcon);
        ClonedToastOrigin.querySelector("span.msg").innerText = msg;
        ClonedToastOrigin.id = ToastID;
        document.querySelector("div.ToastCon").appendChild(ClonedToastOrigin)
        setTimeout(function () {
            document.getElementById(ToastID).remove();
        }, 2233)
        return;
    }
</script>




<style lang="scss">

    .Origins {
        display: none;
    }

    .ToastCon {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: auto;
        z-index: 1145;
        pointer-events: none;
        padding-top: 12px;
    }

    div.Toast {
        margin: 8px auto;
        width: fit-content;
        padding: 10px 14px;

        display: flex;
        align-items: center;

        box-sizing: border-box;
        overflow: hidden;

        transition: 
            background-color 0.25s ease,
            border-color 0.25s ease,
            transform 0.3s ease;

        background-color: #232323;
        border-radius: 12px;
        border-width: 1px;
        border-color: #424242;
        border-style: solid;

        animation: InAndEnd 2s ease;
        animation-fill-mode: forwards;

        @keyframes InAndEnd {
            0% {
                transform: scale(0.75) translateY(-20px);
                opacity: 0;
            }
            20% {
                transform: scale(1) translateY(0px);
                opacity: 1;
            }
            80% {
                transform: scale(1) translateY(0px);
                opacity: 1;
            }
            99% {
                transform: scale(0.75) translateY(-20px);
                opacity: 0;

                margin: 8px auto;
                padding: 10px 14px;
                height: auto;
            }
            100% {
                transform: scale(0.75) translateY(-20px);
                opacity: 0;

                margin: 0 auto;
                padding: 0;
                height: 0;
            }
        }

        .symbol {
            margin-right: 8px;
        }

    }
</style>
